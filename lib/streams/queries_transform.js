"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}();Object.defineProperty(exports,"__esModule",{value:!0});var _base_transform=require("./base_transform"),_base_transform2=_interopRequireDefault(_base_transform),_query=require("../query"),_query2=_interopRequireDefault(_query),QueriesTransform=function(e){function r(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,r);var t=_possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this,e));return t.name="queries",t.filters={creator:"prompt",type:"string"},t}return _inherits(r,e),_createClass(r,[{key:"getParams",value:function(e){return{maxQueries:e.maxQueries||0}}},{key:"isTooManyQueries",value:function(e){var r=e.length;return this.params.maxQueries>0&&r>this.params.maxQueries}},{key:"transform",value:function(e){var r=this,t=[],a=e.data,n={maxQueries:this.params.maxQueries};return""===a?this.commit({creator:"menu",type:"action",data:{operation:"blank",value:null},params:{queryCount:1}}):_query2["default"].isValid(a)?(t=_query2["default"].createFrom(a),this.isTooManyQueries(t)?this.matchError(a):(n.queryCount=t.length,void t.forEach(function(e){r.pushAction({type:"query",data:e,params:n})}))):this.matchError(a)}}]),r}(_base_transform2["default"]);exports["default"]=QueriesTransform;